{% extends "base.html" %}

{% block title %}{{ page.title }}{% endblock %}

{% block content %}
    <article>
      <header class="entry-header">
        <span class="entry-date">{{ page.date | date(format="%Y-%m-%d") }}</span>
        <h1 class="entry-title">{{ page.title }}</h1>


        {% if page.taxonomies.tags %}
        {% set tags = page.taxonomies.tags %}
        <div class="tags_list">
          {% for i in range(end=tags | length) %}
            {% set url = get_taxonomy_url(kind="tags", name=tags[i]) %}
            <span style="color:gray">#<a href="{{ url | safe }}">{{ tags[i] }}</a></span>
          {% endfor %}
        </div>
        {% endif %}
      </header>

      {% if page.extra.show_key_image %}
      <div id="key_image">
      {% if page.extra.show_key_image == true %}
      <a href="{{ page.extra.key_image}}"><img src="{{ page.extra.key_image }}" alt="{{ page.title }}"></a>
      {% else %}
      <a href="{{ page.extra.show_key_image}}"><img src="{{ page.extra.show_key_image }}" alt="{{ page.title }}"></a>
      {% endif %}
      </div>
      {% endif %}

      {% if page.extra.youtube %}
      <div style="padding-bottom: 56.25%; position: relative;"><iframe style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;" width="100%" height="100%" src="https://www.youtube.com/embed/{{ page.extra.youtube }}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture; fullscreen" ><small>Powered by <a href="https://embed.tube/embed-code-generator/youtube/">youtube embed video</a> generator</small></iframe></div>
      {% endif %}

      {% if page.extra.toc and page.toc %}
      <aside class="toc">
          <h2>目次</h2>
          <ul>
            {% for h1 in page.toc %}
              <li>
                <a href="{{ h1.permalink | safe }}">{{ h1.title }}</a>
                {% if h1.children %}
                  <ul>
                    {% for h2 in h1.children %}
                      <li>
                        <a href="{{ h2.permalink | safe }}">{{ h2.title }}</a>
                      </li>
                    {% endfor %}
                  </ul>
                {% endif %}
              </li>
            {% endfor %}
          </ul>
      </aside>
      {% endif %}

      <div class="entry-content clearfix">
        {{ page.content | safe }}
      </div>
    </article>

    <nav class="pagination">
        {% if page.lower %}
        <div class="prev-page">
        <span class="date">新しい記事({{ page.lower.date | date(format="%Y-%m-%d") }})</span><br>
        <a class="next" href="{{page.lower.permalink}}">{{ page.lower.title }}</a>
        </div>
        {% endif %}

        <br>

        {% if page.higher %}
        <div class="prev-page">
        <span class="date">古い記事({{ page.higher.date | date(format="%Y-%m-%d") }})</span><br>
        <a class="next" href="{{ page.higher.permalink}}">{{ page.higher.title }}</a>
        </div>
        {% endif %}

        <br>

        <a href="/posts/page/1">記事一覧</a>
    </nav>

{% endblock %}
